#!/bin/bash

# Dockeræ·±åº¦æ¸…ç†è„šæœ¬
# ä½¿ç”¨æ–¹æ³•: ./scripts/docker-clean.sh

set -e

echo "ğŸ§¹ Dockeræ·±åº¦æ¸…ç†..."
echo "==========================================="

# åœæ­¢æ‰€æœ‰å®¹å™¨
echo "â¹ï¸  åœæ­¢æ‰€æœ‰å®¹å™¨..."
docker-compose down -v --remove-orphans

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å®¹å™¨
echo "ğŸ—‘ï¸  åˆ é™¤æœªä½¿ç”¨çš„å®¹å™¨..."
docker container prune -f

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ
echo "ğŸ—‘ï¸  åˆ é™¤æœªä½¿ç”¨çš„é•œåƒ..."
docker image prune -a -f

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å·
echo "ğŸ—‘ï¸  åˆ é™¤æœªä½¿ç”¨çš„æ•°æ®å·..."
docker volume prune -f

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ
echo "ğŸ—‘ï¸  åˆ é™¤æœªä½¿ç”¨çš„ç½‘ç»œ..."
docker network prune -f

# æ˜¾ç¤ºæ¸…ç†åçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
echo "ğŸ“Š æ¸…ç†å®Œæˆï¼Œå½“å‰Dockerç£ç›˜ä½¿ç”¨:"
docker system df

echo "âœ… æ·±åº¦æ¸…ç†å®Œæˆï¼"